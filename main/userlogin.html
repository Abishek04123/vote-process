<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="login.css">
    <title>Login</title>
</head>

<body>
    <div class="container">
        <h1>Login</h1>
        <form id="loginForm" action="login.php" , method="post">
            <label for="email">Email:</label>
            <input type="email" id="email" name="email">
            <label for="password">Password:</label>
            <input type="password" id="password" name="password">
            <button type="submit">Login</button>
        </form>
    </div>

    <script type="module">

        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.8.0/firebase-app.js";
        import { getDatabase, get, ref, child} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-database.js";
        import { getAuth, signInWithEmailAndPassword} from "https://www.gstatic.com/firebasejs/10.8.0/firebase-auth.js";

        const firebaseConfig = {
            apiKey: "AIzaSyDj6kxlXx9IRgJeidFIZnv85Fxq2Ch62ko",
            authDomain: "login-15a54.firebaseapp.com",
            projectId: "login-15a54",
            storageBucket: "login-15a54.appspot.com",
            messagingSenderId: "320161108854",
            appId: "1:320161108854:web:13f043073702c07f65a057"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase();
        const auth = getAuth(app);
        const dbref = ref(db);

        let EmailInp = document.getElementById('email');
        let PassInp = document.getElementById('password');
        let mainForm = document.getElementById('loginForm');

        let SignInUser = evt => {
            evt.preventDefault();

            signInWithEmailAndPassword(auth, EmailInp.value, PassInp.value)
            .then((credentials)=>{
                window.location.href = 'voting-page.html';
            })

            .catch((error)=>{
                alert(error.message);
                console.log(error.code);
                console.log(error.message);
            })
        }

        mainForm.addEventListener('submit', SignInUser);

    </script>
</body>

</html>